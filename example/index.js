var T=class{weak=new WeakMap;map=new Map;set=(t,n)=>{typeof t!="object"?this.map.set(t,n):this.weak.set(t,n)};get=t=>typeof t!="object"?this.map.get(t):this.weak.get(t);has=t=>{typeof t!="object"?this.map.has(t):this.weak.has(t)};delete=t=>{if(typeof t!="object")return this.map.delete(t);this.weak.delete(t)}};function K(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}var L={autofocus:!0,role:!0,viewBox:!0,disabled:!0,class:!0},N={};function x(e,t,n){if(Array.isArray(n)){e[t](...n);return}if(typeof n=="object"){Object.assign(e[t],n);return}if(e.__lastAttr||(e.__lastAttr={}),e.__lastAttr[t]!==n){if(e.__lastAttr[t]=n,e.setAttribute&&(N[t]||L[t]||/-/.test(t)||K(e))){N[t]=!0,n==null?e.removeAttribute(t):e.setAttribute(t,n);return}e[t]=n}}function d(e,t,n,s){if(e.setAttribute("data-x-subscrib",""),e.__x_subscrib||(e.__x_subscrib={}),e.__x_subscrib[t]=n,!s){if(/^(__update)/.test(t)){n(e,t);return}Promise.resolve(n(e,t)).then(o=>{x(e,t,o)})}}var p=new Set,j=()=>{p.forEach(e=>{e.__x_subscrib&&Object.keys(e.__x_subscrib).forEach(n=>{let s=e.__x_subscrib[n];if(/^(__update)/.test(n)){s(e,n);return}Promise.resolve(s(e,n)).then(o=>{x(e,n,o)})})}),p.clear()};function y(e){e.hasAttribute("data-x-subscrib")&&p.add(e),e.querySelectorAll("[data-x-subscrib]").forEach(n=>{p.add(n)})}var g=new T,v,A=0;function H(){return A<3e3?17:A/3e3*17}function F(e=document.body,t={}){if(e!==null){let n=g.get(e)||0;n&&cancelAnimationFrame(n);let s=requestAnimationFrame(()=>{g.delete(e),typeof e=="string"?document.body.querySelectorAll(e).forEach(y):Array.isArray(e)?e.forEach(y):y(e),j()});g.set(e,s)}if(!t.ignoreSupplement&&e!==document.body){if(v)return;v=setTimeout(()=>{v=null,y(document.body),A=p.size,j()},H())}}var P={childList:!0,subtree:!0},b=new WeakMap,h=new WeakMap,E=new WeakMap;function w(e,t){if(b.has(e)){b.get(e).push(t);return}b.set(e,[t]);let n=new MutationObserver(s=>{if(document.contains(e)){n.disconnect();let o=b.get(e);o&&o.forEach(r=>r(e)),b.delete(e)}});n.observe(document,P)}function S(e,t){if(h.has(e)){h.get(e).push(t);return}h.set(e,[t]),w(e,()=>{let n=new MutationObserver(()=>{if(!document.contains(e)){n.disconnect();let s=h.get(e);s&&s.forEach(o=>o(e)),h.delete(e)}});n.observe(document,P)})}var z=(e,t,{minHeight:n="50px",root:s}={})=>{if(E.has(e)){E.get(e).push(t);return}E.set(e,[t]),w(e,()=>{if(e.style.minHeight||(e.style.minHeight=n),!e.getAttribute("data-lazy")){e.setAttribute("data-lazy","1");let o=new IntersectionObserver(r=>{r.forEach(a=>{if(e.setAttribute("data-lazy","2"),a.isIntersecting){o.disconnect();let i=E.get(e);i&&i.forEach(l=>l(a)),E.delete(e)}})},{root:s,rootMargin:window.innerHeight/2+"px"});o.observe(e),S(e,()=>{o.disconnect()})}})};function I(e){let t;return typeof e=="string"?t=document.createElement(e):t=e,t}function c(e,t){let n=I(e);return t&&Object.keys(t).forEach(o=>{let r=t[o];if(n.setAttribute){if(typeof r=="function"&&!/^on/.test(o)){if(o==="ref"){r(n);return}d(n,o,r);return}if(o==="onMount"){w(n,r);return}if(o==="onCleanup"){S(n,r);return}if(o==="onEntry"){z(n,r);return}}x(n,o,r)}),n}function O(e,t){let{each:n,render:s,...o}=t,r=c(e,o);if(typeof n=="function")d(r,"__update_for",a=>{let i=a.__lastForRender,l=n();if(a.__lastForRender=l,!i){let m=[];for(let f=0;f<l;f++)m.push(s(f,n));a.append(...m);return}if(l>i){let m=[],f=0;for(let u=i;u<l;u++)f++,m.push(s(u,n));a.append(...m)}else{let m=0,f=[];for(let u=l;u<i;u++){let M=a.childNodes.item(u);M&&(f.push(M),m++)}f.forEach(u=>u.remove())}});else{let a=[];for(let i=0;i<n;i++)a.push(s(i,()=>n));r.append(...a)}return r}function R(){let e=document.createElement("span");return e.style.all="none",e}function W(e,t){let n=R();if(typeof e=="function"){let s=o=>{d(o,"__update_show",r=>{Promise.resolve(e()).then(a=>{if(a===r.__lastShow)return;let i=a?t():R();s(i),r.replaceWith(i),r.__lastShow=a})},!0)};s(n)}return n}var q=c("style",{textContent:`
.contains {
	background: #f3f3f3;
	font-size:40px;
}
`});document.head.append(q);var _={value0:"2000"},C=c("div",{className:"contains",style:{cssText:"width:100%; height:100%;"},append:["Hello",c("span",{innerText:"world",style:{cssText:"color:red;"},onclick:()=>{alert("hello")}}),W(()=>Date.now()%3!==0,()=>c("span",{textContent:"show temp"})),O("div",{each:()=>{let e=Number(_.value0)/200;return e>15e3?15e3:e},dog:"aaaaa",["data-length"]:async e=>(await new Promise(t=>setTimeout(t,1e3)),e.children.length),render:(e,t)=>{let n=()=>e%(t()/5);return c("input",{value:()=>_["value"+n()],["data-i"]:e,oninput:s=>{let o=s.currentTarget.value;_["value"+e]=o,F()}})}}),O("div",{each:()=>{let e=Number(_.value0);return e>25e3?25e3:e},dog:"aaaaa",["data-length"]:async e=>(await new Promise(t=>setTimeout(t,1e3)),e.children.length),render:(e,t)=>{let n=()=>e%(t()/500);return c("div",{textContent:()=>_["value"+n()]||"empty",["data-i"]:e})}})]});c(C,{"data-base":"right"});document.body.append(C);
//# sourceMappingURL=index.js.map
